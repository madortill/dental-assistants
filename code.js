const Data = 
    { "0": [{
        term: "Crown-כותרת",
        explain: "האזור הנראה בפה"
    },
    {
        term: "Cusp-תלולית ",
        explain: "אזור מוגבה"
    },
    {
        term: "cervical line-אזור צוואר השן ",
        explain: "אזור הצרות , מפריד בין הכותרת לשורש "
    },
    {
        term: "Root- שורש",
        explain: "האזור האחוז בלסת"
    },
    {
        term: "Furcation- אזור המזלוג, פורציה",
        explain: "התפצלות בין השורשים"
    },
    {
        term: "Apex-קצה חוד השורש, אפקס ",
        explain: "שיא , חוד בלטינית"
    },
    {
        term: "שלישי אפיקלי",
        explain: "השליש החודי של השורש 1"
    },
    {
        term: "Apical foremen- פתח חוד השורש ",
        explain: "פתח אשר דרכו עוברים כלי דם ועצבים המגיעים מן העצם ומקנים חיות ויטליות לשן"
    },{
        term: "ויטה ",
        explain: "חיות"
    }],
      
    "1": [{
        term: "אנטומיה",
        explain: "תורה החוקרת את מבנה הגוף ומערכותיו השונות "
    },{
        term: "תא ",
        explain: "יחידת החיים הקטנה והבסיסית ביותר המקיימת את כל מאפייני החיים"
    },{
        term: "רקמה",
        explain: "צבר של תאים אחידים מבחינת מוצא מבנה ותפקוד "
    },{
        term: "חומר אורגני",
        explain: "תוצר של גוף בעל חיים או צומח המכיל פחמנים ומימנים (שומן , חלבון )"
    },{
        term: "חומר אנאורגני",
        explain: "חומר יסוד או מינרל שהגוף קולט מהסביבה ואינו מייצר אותו אלא משתמש בו לצרכיו (סידן , ברזל ומלחים)"
    },{
        term: "מוך pulp מורכב מ",
        explain: "100%חומר  אורגני +מים "
    },{
        term: "דנטין Dentin מורכב מ",
        explain: "70% חומר אנאורגני +30% חומר אורגני + מים"
    },{
        term: "אמייל Enamel מורכב מ",
        explain: "97% אנאורגני + 3% אורגני + מים"
    }],

    "2": [{
        term: "פריודונטיום",
        explain: "מנגנון אחיזת השן (פריו-מסביב, דונטיום-שן) "
    },{
        term: "אפיתל",
        explain: "תאים צפופים+ מעט חומר חוץ תאי. תפקידם ציפוי, הגנה"
    },{
        term: "רקמת חיבור ",
        explain: "תאים מרווחים+הרבה חומר חוץ תאי. תפקידם חיבור בין הרקמות"
    },{
        term: "ממברנה בזאלית",
        explain: "מעטפת חלבונית, תפקידה לקשר בין רקמת אפיתל לרקמת חיבור"
    },{
        term: "צמדה אפיתליאלית",
        explain: "תאי אפיתל של החניכיים הצמודים לאמייל "
    },{
        term: "מלט, צמנטום cementum ",
        explain: "50% חומר אנאורגני+ 50% חומר אורגני +מים"
    },{
        term: "רצועות סביב השן- PDL",
        explain: "PerioDontal Ligaments"
    },{
        term: "עצם מכתשית",
        explain: "alveolar bone "
    },{
        term: "כותרת קלינית ",
        explain: "החלק של הכותרת הנראה בפה. מפסגת התלולית עד קו פסגת החניכיים. "
    },{
        term: "כותרת אנטומית",
        explain: "כל החלק המצופה באמייל. מפסגת התלולית עד קו ה-CEJ"
    }],

    "3": [{
        term: "לסת עליונה maxila ",
        explain: "הלסת בה נמצא החיך הקשה palate מחוברת לעצמות הגולגולת ואינה נעה"
    },{
        term: "לסת תחתונה mandible",
        explain: "עליה נמצאת הלשון lingua "
    },{
        term: "T.M.J-temporo mandibular joint ",
        explain: "מפרק המחבר את הלסת התחתונה לעליונה, ויוצר את תנועת הלסת התחתונה (לעיסה, דיבור)"
    },{
        term: "קוודרנט-quadrant ",
        explain: "רבע פה"
    },{
        term: "חותכות-incisors ",
        explain: "שן 1+2"
    },{
        term: "ניב-cuspid/ canine",
        explain: "שן 3"
    },{
        term: "מלתעות-premolar/ bicuspid ",
        explain: "שן 4+5"
    },{
        term: "טוחנות-molars ",
        explain: "שן 6+7+8"
    }],

    "4": [{
        term: "Occlusal- משטח אוקלוזלי",
        explain: "משטח לעיסי השיניים אחוריות"
    },{
        term: "Incisal- משטח אינסיזלי",
        explain: "משטח להבי בשיניים קדמיות "
    },{
        term: "buccal - משטח בוקלי",
        explain: "פונה לכיוון הלחי בשיניים אחוריות"
    },{
        term: "Labial- משטח לביאלי",
        explain: "פונה לכיוון השפתיים בשיניים קדמיות"
    },{
        term: "Facial- משטח פציאלי",
        explain: "פונה לכיוון הפנים- מכיל את המשטח הבוקלי והלביאלי"
    },{
        term: "palatinal - משטח פלטינלי",
        explain: "פונה לכיוון החך בלסת עליונה"
    },{
        term: "Lingual- משטח לינגואלי",
        explain: "פונה לכיוון הלשון בלסת תחתונה"
    },{
        term: "Proximal- משטח פרוקסימלי",
        explain: "משטח הפונה לכיוון השן הסמוכה"
    },{
        term: "Mesial- משטח מזיאלי",
        explain: "משטח פרוקסימלי הפונה לכיוון קו האמצע בקשת"
    },{
        term: "Distal- משטח דיסטלי",
        explain: "משטח פרוקסימלי הרחוק מקו האמצע בקשת, הופכי למזיאלי"
    },{
        term: "כיוון אפיקלי- apical",
        explain: "האזור הפונה לכיוון האפקס"
    },{
        term: "כיוון אוקלוזלי- occlusal",
        explain: "האזור הפונה לכיוון הסגר (בשיניים קדמיות אינסיזלי)"
    },{
        term: "hight of contur ",
        explain: "האיזור הרחב והבולט ביותר של השן ע״ג הכותרת"
    },{
        term: "contact point- נקודת מגע",
        explain: "השיניים עומדות זו ליד זו ונוגעות בנקודה מסויימת הנקראת נקודת מגע"
    },{
        term: "contact area - שטח מגע",
        explain: "שטח מגע דיסטלי בא במגע עם שטח מגע מזיאלי בין שיניים סמוכות.  במקרים בהם המגע בין השיניים הוא יותר מנקודה"
    },{
        term: "embrasure - אמברזורה",
        explain: "חלל בצורת משולש המתקבל בין שני איזורים שונים בשיניים סמוכות "
    },{
        term: "gingival embrasure- אמברזורה ג׳ינג׳יבלית",
        explain: "חלל בצורת משולש בין שתי שיניים סמוכות. קודקודו בנקודת המגע, בסיסו בחניכיים וצלעותיו הן המשטחים הפרוקסימליים"
    },{
        term: "incisal embrasure- אמברזורה אינסיזלית",
        explain: "חלל בצורת משולש בין שתי שיניים סמוכות. קודקודו בנקודת המגע, בסיסו קו הסגר וצלעותיו המשטחים האינסיזלים"
    },{
        term: "buccal and lingual embrasures- אמברזורה בוקלית ולינגואלית",
        explain: "חלל בצורת משולש בין שתי שיניים סמוכות. קודקודו בנקודת המגע, בסיסו בקו הדמיוני בצד הבוקלי/הלינגואלי וצלעותיו המשטחים הבוקלים או הלינגואלים"
    },{
        term: "interdental papilla- פפילה דנטלית",
        explain: "משולש אותו יוצרות החניכיים בין השיניים וממלא את חלל האמברזורה"
    }],

    "5": [{
        term: "עששת- carries ",
        explain: "ריקבון בשן -החיידקים פוגעים ברקמות הקשות של השן אמייל ודנטין "
    },{
        term: "חלל- cavity ",
        explain: "מבוצע ע״י הרופא בכדי לסלק את העששת ולמעשה קידוח השן והכנת השן לקבלת שחזור על מנת שהשחזור יחזיק מעמד "
    },{
        term: "box",
        explain: "הינו החלל העמוק ביותר בקלאס 2 הוא נוצר לאחר סילוק העששת הפרוקסימלית"
    },{
        term: "isthmus ",
        explain: "אזור של היצרות בין הbox לחלק האוקלוזלי של החלל"
    },{
        term: "lock",
        explain: "כניסה של החלל לאישורי חריצים משניים באוקלוזיה מטרתה למנוע סיבוב של השחזור בתוך השן"
    },{
        term: "line angle ",
        explain: "מפגש בין שני משטחים יוצר קו"
    },{
        term: "point angle",
        explain: "מפגש בין שלוש משטחים יוצר נקודה"
    },{
        term: "Cabo surface line angle ",
        explain: "מפגש בין קיר החלל לבין השטח החיצוני"
    },{
        term: "רצפה פולפרית",
        explain: "המשטח הפונה אל המוך ומאונך לציר האורך של השן"
    },{
        term: "קיר אקסיאלי",
        explain: "קיר היורד מהרצפה הפולפרית ומקביל לציר האורך של השן ופונה למוך"
    },{
        term: "רצפה ג׳ינג׳יבלית",
        explain: "קיר המאונך לציר האורך של השם אך אינו פונה למוך ומקביל לרצפה פולפרית"
    }],

    "6": [{
        term: "עששת בחרירים וחריצים",
        explain: "pits and fissure caries "
    },{
        term: "עששת על משטחים חלקים",
        explain: "smooth surface caries"
    },{
        term: "עששת משנית-secondary caries",
        explain: "נוצרת לאחר שחזור- חיידקים נכנסים בין הסתימה לאמייל או מתחת לסתימה ויוצרים עששת"
    },{
        term: "עששת אצל תינוקות-baby bottle caries",
        explain: "בייחוד בשיני חלק קדמיות נגרם בגלל מתן משקאות מתוקים"
    },{
        term: "עששת צווארית",
        explain: "root caries"
    },{
        term: "עששת עקב טיפול אורתודונטי",
        explain: "orthodontic caries"
    }],

    "7": [{
        term: "תלולית- cusp",
        explain: "בליטה אזור מוגבה בחלק הלעיסי של השיניים אחוריות ממנו ניתן לרדת ל4 כיוונים עיקריים.  תפקיד התלולית לשמור על המימד האנכי של הפנים וטחינת מזון"
    },{
        term: "רכס- ridge ",
        explain: "אזור מוגבה שממרכזו ניתן לרדת לשני כיוונים עיקריים ומהשניים הנותרים להמשיך באותו גובה או לעלות ( במשטח אוקלוזלי הרכס מחבר בין שתי תלוליות )"
    },{
        term: "רכס שולי- Marginal ridge",
        explain: "רכס המהווה את הגבולות המזיאלים והדיסטאלים במשטח אוקלוזלי של שיניים אחוריות ובמשטחים לינגואלים/פלטינלים בשיניים קדמיות "
    },{
        term: "רכס רוחבי -transverse ridge ",
        explain: "רכס המחבר את שיאי התלוליות הבוקלית ובלי גורלית של מלתעה ראשונה תחתונה ולעתים מופיע גם בניב עליון כאשר הוא מחבר בין איזור אינסיזלי לג׳ינג׳יבלי במשטח פלטינלי"
    },{
        term: "רכס אלכסוני oblique ridge- ",
        explain: "רכס המחבר את שיער התלוליות המזיופלטינלית עם הדיסטובוקלית בטוחנות עליונות "
    },{
        term: "צינגולום- cingulum",
        explain: "בליטה המופיעה בצד הלינגואלי / פלטינלי בשיניים קדמיות  באזור ג׳ינג׳יבלי"
    },{
        term: "ממלונים -mamelons ",
        explain: "בליטות בקצה הלהבי של שיניים חותכות מופיעות בעיקר בשיניים שבקעו זה אתה לחלל הפה . הממלונים נשחקים עם הזמן ולכן לא שיניים אצל אנשים מבוגרים , הממלונים לא ישחקו כאשר אין סגר תקין open bite . "
    },{
        term: "שקע -fossa ",
        explain: "אזור שקוע הנמצא במשטח אוקלוזלי בין התלוליות ובשיניים קדמיות בין הרכסים "
    },{
        term: "שקע מרכזי -central fossa ",
        explain: "בין כל תלולית בוקלית ולינגואלית / פלטינלית של שיניים אחוריות יש שקע "
    },{
        term: "Triangular fossa ",
        explain: "שקע הנמצא ליש הרכסים השוליים בשיניים אחוריות וצורתו משולש "
    },{
        term: "חריץ ",
        explain: "מפגש שיפועים פנימיים של תלוליות או רכסים , בד״כ חריצים מתפתחים בתוך שקעים "
    },{
        term: "Fissure",
        explain: "חריץ עמוק וצר "
    },{
        term: "groove",
        explain: "חריץ רדוד (כערוץ נחל)"
    },{
        term: "חריר- pit ",
        explain: "שקע התפתחותי נקודתי , החריר צר ועמוק נמצא בד״כ במפגש של חריצים במשטח לעיסי של שיניים אחוריות ."
    }],

    "8": [{
        term: "ספטולה דנטלית ",
        explain: "לצורך נשיאת חומרים לחלל עפה ועבודה בפה המתרפא "
    },{
        term: "ספטולת ערבוב",
        explain: "מיועדת לערבוב חומרים שונים (דו או חד צדדית) עבודה מחוץ לפה המתרפא "
    },{
        term: "מחדר, זונדה",
        explain: "explorer"
    },{
        term: "GMT",
        explain: "gingival marginal trimmer"
    },{
        term: "גלף",
        explain: "carver"
    },{
        term: "דייקלון",
        explain: "aplicator "
    },{
        term: "מחליק",
        explain: "burnisher "
    },{
        term: "מרית",
        explain: "spatula"
    }],

    "9": [{
        term: "ממברנה ",
        explain: "מעטפת התא, עשויה שומנים, מבודדת את התא מסביבתו"
    },{
        term: "גרעין",
        explain: "אחראי על תפקוד התא, מכיל את החומר התורשתי DNA "
    },{
        term: "מיטוכונדריה",
        explain: "״תחנת הכוח של התא״, אחראי על הפקת אנרגיה לתא"
    },{
        term: "ריבוזום",
        explain: "יצרן חלבונים"
    },{
        term: "רשתית אנדופלסמטית RER ",
        explain: "רשת שומנית עליה נמצאים הריבוזומים"
    },{
        term: "מערכת גולג׳י",
        explain: "מערכת האורות את החלבונים"
    }] 
    };

var currTerm = 0;
var currTermTest = 0;
var worngsListTest = [];
var currectAnsArrTry = [];
var arrShaffelCard = [];
var subNum = 0;
var termList=Data[0];

window.onload = () => {
    document.querySelector(".card-button").addEventListener("click", onClickCardButton);
    document.querySelector(".test-button").addEventListener("click", onClickTestButton);
    document.querySelector(".try-button").addEventListener("click", onClickTryButton);
    for( var i= 0; i<10; i++)
    {
        //console.log("images/" + i + " grey.svg");
        //document.getElementById("sub-title" + i).style.backgroundImage = url("images/" + i + " grey.svg");
        //$("#sub-title" + i).css('background-image', 'url("images/' + i + ' grey.svg")');
        //document.getElementById("sub-title" + i).style.backgroundImage = 'url("images/" + i +  "grey.svg")';

        document.querySelector("#sub-title" + i).addEventListener("click", onClickOtherSub);
    }
    
    document.querySelector(".game-button").addEventListener("click", onClickGameButton);
};

function slot(name, styleName, ...contents) {
    var slot = document.createElement("span");
    slot.slot = name;
    slot.classList.add(styleName);
    slot.append(...contents);
    return slot;
}



function onClickOtherSub(event)
{
    if(this.getAttribute("id").charAt(9) !== subNum) {
        // this.setAttribute("src","images/" + this.getAttribute("id").charAt(9) + " pink.svg");
        document.querySelector("#" + this.getAttribute("id") + " img" ).setAttribute("src","images/" + this.getAttribute("id").charAt(9) + " pink.svg");
        document.querySelector("#sub-title" + subNum + " img").setAttribute("src","images/" + subNum + " grey.svg");
        subNum = this.getAttribute("id").charAt(9);
        console.log("sub num : " + subNum);
        changTerms(subNum);
    }
}

function changTerms(newTermList){
    
    termList=Data[newTermList];
    console.log(Data['אנטומיה של השן']);

}


function slot(name, styleName, ...contents) {
    var slot = document.createElement("span");
    slot.slot = name;
    slot.classList.add(styleName);
    slot.append(...contents);
    return slot;
}

function createTermChoice(n, t) {
    var el = document.createElement("div");
    el.append(slot("number", "worng-counter-number", n), slot("text", "worng-text-term", t));

    el.attachShadow({ mode: 'closed' }).append(document.querySelector(".term-choice").content.cloneNode(true));
    document.querySelector(".space-of-adding-terms").append(el);
}

function removTermChoice(n, t) {
    var el = document.createElement("div");
    el.append(slot("number", "worng-counter-number", n), slot("text", "worng-text-term", t));
    el.attachShadow({ mode: 'closed' }).append(document.querySelector(".term-choice").content.cloneNode(true));
    document.querySelector(".space-of-adding-terms").append(el);
}

function onClickCardButton() {
    //for( var i= 0; i<10; i++)
   // {
        //document.querySelector("#card-title" + 1).addEventListener("click", onClickOtherSub);
    //}
    onLoadCards();
    document.querySelector(".home-page").classList.add("inactive");

}

function onClickBackButton() {
    document.querySelector(".home-page").classList.remove("inactive");
    document.querySelector(".cards").classList.add("inactive");
    document.querySelector("header").classList.add("in-menu");
}

function onLoadCards() {
    document.querySelector(".cards").classList.remove("inactive");
    document.querySelector("header").classList.remove("in-menu");
    displayTerm();
    document.querySelector(".rightArrow").addEventListener("click", onClickRightArrow);
    document.querySelector(".leftArrow").addEventListener("click", onClickLeftArrow);
    document.querySelector(".choose-again").addEventListener("click", onClickBackButton);

}

function onClickLeftArrow(e) {
    changeCard(+1);
}

function onClickRightArrow(e) {
    changeCard(-1);
}

function displayTerm() {
    console.log(currTerm);
    console.log(termList);
    //
    document.getElementById("term-text").innerHTML = termList[currTerm].term;
    document.getElementById("term-explain-text").innerHTML = termList[currTerm].explain;
    document.getElementById("current-term").innerHTML = `${currTerm + 1}/${termList.length}`;
    document.querySelector(".card>.hitbox").checked = false;
}

function changeCard(move) {
    document.querySelector(".appearence").classList.remove(`num-${(currTerm % 4) + 1}`);
    // currTerm = ((currTerm + (move & termList.length)) % termList.length);
    currTerm = (currTerm + move) % termList.length;
    if (currTerm === -1) currTerm = termList.length - 1;
    document.querySelector(".appearence").classList.add(`num-${(currTerm % 4) + 1}`);

    displayTerm();
}

function onClickTestButton() {
    onLoadTest();
    document.querySelector(".home-page").classList.add("inactive");
    var signs = document.querySelector(".result-signs");
    var ans = document.querySelector("#answer>.ans-input");
    signs.style.top = `${ans.offsetTop}px`;
    signs.style.left = `calc(${ans.offsetLeft}px - 15vw / 2 - 3vw)`;
}


function onLoadTest() {
    currTermTest = 0;
    document.querySelector(".test").classList.remove("inactive");
    document.querySelector("header").classList.remove("in-menu");
    displayTermTest();
    document.querySelector(".rightArrowTest").addEventListener("click", onClickLeftArrowTest);
    document.querySelector(".leftArrowTest").addEventListener("click", onClickRightArrowTest);
    document.querySelector(".test .choose-again").addEventListener("click", onClickBackButtonTest);
    document.querySelector(".check-ans").addEventListener("click", checkSpelling);
    document.querySelector(".dont-know-text").addEventListener("click", onClickDontKnow);
}

function changeTape(move) {
    document.querySelector(".test").classList.remove(`num-${(currTermTest % 4) + 1}`);
    currTermTest = (currTermTest + move) % termList.length;
    if (currTermTest === -1) currTermTest = termList.length - 1;
    document.querySelector(".test").classList.add(`num-${(currTermTest % 4) + 1}`);


    displayTermTest();
}

function onClickRightArrowTest(e) {
    if (currTermTest == termList.length - 1) {
        document.querySelector(".test").classList.add("inactive");
        document.querySelector(".test-ans").classList.remove("inactive");
        document.querySelector("#score-text").innerHTML = `הצלחת ב- ${termList.length - worngsListTest.length} שאלות`;
        onLoadTestAns();
    }
    else {
        document.querySelector(".test").classList.remove(`bad-answer`);
        changeTape(+1);
    }
}

function onClickLeftArrowTest(e) {
    changeTape(-1);
}

function displayTermTest() {
    document.getElementById("term-text-test").innerHTML = termList[currTermTest].explain;
    document.getElementById("term-explain-text").innerHTML = termList[currTermTest].explain;
    document.getElementById("current-term-test").innerHTML = `${currTermTest + 1}/${termList.length}`;
    document.querySelector(".test").classList.remove("bad-asnwer");
    document.querySelector(".note .appearence").classList.remove("currect");
    document.querySelector(".note .appearence").classList.remove("wrong");
    document.querySelector(".leftArrowTest").style.visibility = "hidden";
    document.querySelector(".ans-input input").disabled = false;
    document.querySelector(".currect-text").style.visibility = "hidden";
    document.querySelector(".worng-text").style.visibility = "hidden";
    document.querySelector(".dont-know-text").style.visibility = "visible";
    document.querySelector(".check-ans").style.visibility = "visible";

    //x and y signs
    document.querySelector("#greenV").style.visibility = "hidden";
    document.querySelector("#redX").style.visibility = "hidden";

    document.querySelector(".ans-input input").value = "";
}

function onClickBackButtonTest() {
    document.querySelector(".home-page").classList.remove("inactive");
    document.querySelector(".test").classList.add("inactive");
    document.querySelector("header").classList.add("in-menu");

    document.querySelector(".test").classList.remove(`num-${(currTermTest % 4) + 1}`);
    document.querySelector(".test").classList.remove(`bad-answer`);
    worngsListTest = [];
    currTermTest = 0;
    // changeTape(-1);
}

function checkSpelling() {
    //ueser correct
    if (document.querySelector(".ans-input input").value == termList[currTermTest].term) {
        document.querySelector(".note .appearence").classList.remove("wrong");
        document.querySelector(".note .appearence").classList.add("currect");
        document.querySelector(".currect-text").style.visibility = "visible";
        document.querySelector("#greenV").style.visibility = "visible";
    }
    //user worng
    else {
        document.querySelector(".note .appearence").classList.remove("currect");
        document.querySelector(".note .appearence").classList.add("wrong");
        worngsListTest.push(termList[currTermTest].term);
        document.querySelector(".worng-text").innerHTML = `טעית! התשובה הנכונה: ${termList[currTermTest].term} `;
        document.querySelector(".worng-text").style.visibility = "visible";
        document.querySelector("#redX").style.visibility = "visible";
    }

    document.querySelector(".test").classList.add("bad-answer");
    document.querySelector(".leftArrowTest").style.visibility = "visible";
    document.querySelector(".dont-know-text").style.visibility = "hidden";
    document.querySelector(".check-ans").style.visibility = "hidden";
    document.querySelector(".ans-input input").disabled = true;
}

function onClickDontKnow() {
    document.querySelector(".ans-input input").value = termList[currTermTest].term;
    document.querySelector(".test").classList.add("bad-answer");
    document.querySelector(".leftArrowTest").style.visibility = "visible";
    document.querySelector(".dont-know-text").style.visibility = "hidden";
    document.querySelector(".check-ans").style.visibility = "hidden";
    document.querySelector(".ans-input input").disabled = true;
}

function onLoadTestAns() {
    document.querySelector(".test-ans .choose-again").addEventListener("click", onClickBackButtonTestAns);

    document.querySelector(".test").classList.remove(`num-${(currTermTest % 4) + 1}`);
    document.querySelector(".test").classList.remove(`bad-answer`);

    for (var i = 0; i < worngsListTest.length; i++) {
        createTermChoice((i + 1), (worngsListTest[i]));
    }
    worngsListTest = [];
    currTermTest = 0;
}

function onClickBackButtonTestAns() {
    document.querySelector(".home-page").classList.remove("inactive");
    document.querySelector(".test-ans").classList.add("inactive");
    document.querySelector("header").classList.add("in-menu");
    var answer = document.querySelector(".space-of-adding-terms");
    while (answer.firstChild)
        answer.firstChild.remove();
}



/************************* 
//try
**************************/
function slotTry(name, styleName, ...contents) {
    var slot = document.createElement("div");
    slot.slot = name;
    slot.classList.add(styleName);
    slot.append(...contents);
    if (styleName == "check-box") {
        slot.addEventListener("click", onClickNewChoice);
    }
    return slot;
}
function createTryQuess(t, correct, ...a) {
    var el = document.createElement("div");
    el.append(slotTry("term-text-try", "term-text-try", t), slotTry("check-box1", "check-box"), slotTry("ans1", "try-answer", termList[(a[0])].explain),
        slotTry("check-box2", "check-box"), slotTry("ans2", "try-answer", termList[(a[1])].explain), slotTry("check-box3", "check-box"),
        slotTry("ans3", "try-answer", termList[a[2]].explain), slotTry("check-box4", "check-box"), slotTry("ans4", "try-answer", termList[a[3]].explain));

    el.attachShadow({ mode: 'closed' }).append(document.querySelector(".try-quess").content.cloneNode(true));
    document.querySelector(".space-of-adding-quess").prepend(el);
    el.correct = correct;
}

function onClickTryButton() {
    onLoadTry();
    document.querySelector(".home-page").classList.add("inactive");

}

function onLoadTry() {
    document.querySelector(".try").classList.remove("inactive");
    document.querySelector("header").classList.remove("in-menu");
    document.querySelector(".space-of-adding-quess").scrollIntoView();

    showQuess();
    // displayTermTest();
    //document.querySelector(".check-if-currect-img").style.visibility = "visible";
    document.querySelector(".try .choose-again").addEventListener("click", onClickBackButtonTry);
    document.querySelector(".check-if-currect-img").style.visibility = "visible";
    document.querySelector(".try .check-if-currect").addEventListener("click", onClickCheckTry);


}

function onClickBackButtonTry() {
    document.querySelector(".home-page").classList.remove("inactive");
    document.querySelector(".try").classList.add("inactive");
    document.querySelector("header").classList.add("in-menu");
    var answer = document.querySelector(".space-of-adding-quess");
    document.querySelector(".space-of-adding-quess").classList.remove("disable");
    while (answer.firstElementChild != answer.lastElementChild)
        answer.firstChild.remove();
    document.querySelector(".check-if-currect-text").innerHTML = "לבדיקה";
}

function showQuess() {
    var randArr = [];
    var curretAns = 0;

    for (var i = 0; i < termList.length; i++) {
        curretAns = Math.floor(Math.random() * 4);
        currectAnsArrTry.push(curretAns);

        randArr = randArray(i, curretAns);

        createTryQuess(termList[i].term, curretAns, ...randArr);
    }
}

//create array with random answers and the currect answers
function randArray(placeInXml, number) {

    var arr = [];
    arr[number] = placeInXml;
    var temp = 0;

    for (var i = 0; i < 4; i++) {

        if (i === number) {
            continue;
        }

        temp = Math.floor(Math.random() * (termList.length));
        while (arr.includes(temp)) {
            temp = Math.floor(Math.random() * (termList.length));
        }

        arr[i] = temp;
    }
    return arr;
}

function onClickNewChoice(e) {

    if (e.target.parentElement.querySelector(".checked") != null) {
        e.target.parentElement.querySelector(".checked").classList.remove("checked");
    }
    e.target.classList.add("checked");

}

function onClickCheckTry() {
    var cunterCorrectAns = 0;
    document.querySelector(".space-of-adding-quess").classList.add("disable");
    //check if the user currect
    for (var i = termList.length - 1; i > -1; i--) {
        var question = document.querySelectorAll(".space-of-adding-quess>div")[i];
        var number = question.querySelector(".checked");
        if (number) {
            number = /[1-9]+/.exec(number.slot);
        } else {
            number = "-1";
        }
        if (Number(number) === question.correct + 1) {
            question.querySelector(".checked").classList.add("correct");
            cunterCorrectAns++;
        }
        else {
            if (number != -1) {
                question.querySelector(".checked").classList.add("mistake");
            }
            question.querySelector(`[slot=check-box${question.correct + 1}]`).classList.add("right");

        }
        document.querySelector(".check-if-currect-text").innerHTML = `הצלחת <br>${cunterCorrectAns} מתוך ${termList.length} שאלות`;
        document.querySelector(".check-if-currect-img").style.visibility = "hidden";
        document.querySelector(".check-if-currect-text").scrollIntoView();
        //Number(/[1-9]+/.exec("check-box1"))
    }

}

/************************* 
//game
**************************/
function onClickGameButton() {
    onLoadGame();
    document.querySelector(".home-page").classList.add("inactive");
}

function onLoadGame() {
    document.querySelector(".game").classList.remove("inactive");
    document.querySelector("header").classList.remove("in-menu");

    document.querySelector(".game .choose-again").addEventListener("click", onClickBackButtonGame);
    document.querySelector(".match-button").addEventListener("click", onClickMatchButton)
    counterCorrectAns = 0;
    document.querySelector(".match-button").style.visibility = "visible";
    showGameCard();
}

function onClickBackButtonGame() {
    document.querySelector(".home-page").classList.remove("inactive");
    document.querySelector(".game").classList.add("inactive");
    document.querySelector("header").classList.add("in-menu");

    while (document.querySelector(".space-of-adding-cards").firstChild)
        document.querySelector(".space-of-adding-cards").firstChild.remove();
    document.querySelector(".match-button").classList.remove("disable");
    arrShaffelCard = [];
    clearInterval(counterSec);
    totalSec = 0;
    document.querySelector("#congrats").innerHTML = "";
    document.querySelector(".game #finish-game").innerHTML = "";
}

function slotGame(name, styleName, index, ...contents) {
    var slot = document.createElement("div");
    slot.slot = name;
    slot.classList.add(styleName);
    slot.append(...contents);
    slot.index = index;
    if (styleName == "term-explain-card-game") {
        slot.addEventListener("click", onClickExplainCard);
    }
    else {
        slot.addEventListener("click", onClickTermCard);
    }
    return slot;
}

function createGameCards(n, ...a) {
    var el = document.createElement("div");
    console.log(arrShaffelCard);
    if (arrShaffelCard[n] > termList.length) {

        if (termList[arrShaffelCard[n] - termList.length].explain.length > 15) {
            var tempSlot = slotGame("explain", "term-explain-card-game", arrShaffelCard[n] - termList.length, `${(termList[arrShaffelCard[n] - termList.length].explain.slice(0, 15))}...`)
            tempSlot.addEventListener("touchend", function () {
                clearTimeout(tempSlot.pressTimer);
                // Clear timeout
                return false;
            });
            tempSlot.addEventListener("touchstart", function () {
                // Set timeout
                tempSlot.pressTimer = window.setTimeout(function () {
                    document.querySelector(".big-explain").style.visibility = "visible";
                    document.querySelector(".space-of-adding-cards").classList.add("disable");
                    document.getElementById("big-explain-img").addEventListener("click", afterClickXExplain);
                    document.querySelector(".big-explain-text").innerHTML = termList[arrShaffelCard[n] - termList.length].explain;
                }, 500);
                return false;
            });


            el.append(tempSlot);
        }
        else {
            el.append(slotGame("explain", "term-explain-card-game", arrShaffelCard[n] - termList.length, termList[arrShaffelCard[n] - termList.length].explain));
        }
    }
    else {

        if (termList[arrShaffelCard[n]].term.length > 15) {
            var tempSlot = slotGame("term", "term-explain-card-game", arrShaffelCard[n] - termList.length, `${(termList[arrShaffelCard[n]].term.slice(0, 15))}...`)
            tempSlot.addEventListener("touchend", function () {
                clearTimeout(tempSlot.pressTimer);
                // Clear timeout
                return false;
            });
            tempSlot.addEventListener("touchstart", function () {
                // Set timeout
                tempSlot.pressTimer = window.setTimeout(function () {
                    document.querySelector(".big-explain").style.visibility = "visible";
                    document.querySelector(".space-of-adding-cards").classList.add("disable");
                    document.getElementById("big-explain-img").addEventListener("click", afterClickXExplain);
                    document.querySelector(".big-explain-text").innerHTML = termList[arrShaffelCard[n]].term;
                }, 500);
                return false;
            });


            el.append(tempSlot);
        }
        else {
            el.append(slotGame("term", "term-card-game", arrShaffelCard[n],  termList[arrShaffelCard[n]].term));
        }



       // el.append(slotGame("term", "term-card-game", arrShaffelCard[n], termList[arrShaffelCard[n]].term));
    }

    if (arrShaffelCard[n + 1] >= termList.length) {
        if (termList[arrShaffelCard[n + 1] - termList.length].explain.length > 30) {
            var tempSlot = slotGame("explain", "term-explain-card-game", arrShaffelCard[n + 1] - termList.length, `${(termList[arrShaffelCard[n + 1] - termList.length].explain.slice(0, 30))}...`)
            tempSlot.addEventListener("touchend", function () {
                clearTimeout(tempSlot.pressTimer);
                // Clear timeout
                return false;
            });
            tempSlot.addEventListener("touchstart", function () {
                // Set timeout
                tempSlot.pressTimer = window.setTimeout(function () {
                    document.querySelector(".big-explain").style.visibility = "visible";
                    document.querySelector(".space-of-adding-cards").classList.add("disable");
                    document.getElementById("big-explain-img").addEventListener("click", afterClickXExplain);
                    document.querySelector(".big-explain-text").innerHTML = termList[arrShaffelCard[n + 1] - termList.length].explain;
                }, 500);
                return false;
            });


            el.append(tempSlot);
        }
        else {
            el.append(slotGame("explain", "term-explain-card-game", arrShaffelCard[n + 1] - termList.length, termList[arrShaffelCard[n + 1] - termList.length].explain));
        }

    }
    else {
        el.append(slotGame("term", "term-card-game", arrShaffelCard[n + 1], termList[arrShaffelCard[n + 1]].term));
    }

    el.attachShadow({ mode: 'closed' }).append(document.querySelector(".term-card").content.cloneNode(true));
    document.querySelector(".space-of-adding-cards").append(el);



}

function showGameCard() {
    var randArr = [];
    var curretAns = 0;

    for (var i = 0; i < termList.length; i++) {
        arrShaffelCard.push(i);
        arrShaffelCard.push(i + termList.length);
    }

    arrShaffelCard = shuffle(arrShaffelCard);

    for (var i = 0; i < termList.length * 2; i += 2) {
        createGameCards(i, ...randArr);
    }
    counterSec = setInterval(setTime, 1000);
}

function onClickExplainCard(e) {
    //הוספת מחלקה של צבע אחר

    if (e.target.parentElement.parentElement.querySelector(".game-curr-choose-explain") != null) {
        e.target.parentElement.parentElement.querySelector(".game-curr-choose-explain").classList.remove("game-curr-choose-explain");
    }
    e.target.classList.add("game-curr-choose-explain");

}

function onClickTermCard(e) {
    //הוספת מחלקה של צבע אחר

    if (e.target.parentElement.parentElement.querySelector(".game-curr-choose-term") != null) {
        e.target.parentElement.parentElement.querySelector(".game-curr-choose-term").classList.remove("game-curr-choose-term");
    }
    e.target.classList.add("game-curr-choose-term");
}

/**
 * 
 * @param {Array} arr 
 */
function shuffle(arr) {
    var tmp = arr.slice();
    for (var i = 0; i < arr.length; i++) {
        var index = Math.floor(Math.random() * tmp.length);
        arr[i] = tmp[index];
        tmp = tmp.slice(0, index).concat(tmp.slice(index + 1));
    }
    return arr;
}

var changColor;
var counterCorrectAns = 0;
var totalSec = 0;
var counterSec;

function onClickMatchButton(e) {
    if (counterCorrectAns < termList.length - 1) {
        if (document.querySelector(".game-curr-choose-term") != null && document.querySelector(".game-curr-choose-explain") != null) {
            if (document.querySelector(".game-curr-choose-term").index == document.querySelector(".game-curr-choose-explain").index) {
                //add red color
                document.querySelector(".game-curr-choose-explain").classList.add("game-curr-correct-explain");
                document.querySelector(".game-curr-choose-term").classList.add("game-curr-correct-term");
                //remove yellow color

                document.querySelector(".game-curr-choose-explain").classList.remove("game-curr-choose-explain");
                document.querySelector(".game-curr-choose-term").classList.remove("game-curr-choose-term");

                changColor = setInterval(disaperGameCard, 1000);
                counterCorrectAns++;
            }
            else {
                //add red color
                document.querySelector(".game-curr-choose-explain").classList.add("game-curr-worng-explain");
                document.querySelector(".game-curr-choose-term").classList.add("game-curr-worng-term");
                //remove yellow color

                document.querySelector(".game-curr-choose-explain").classList.remove("game-curr-choose-explain");
                document.querySelector(".game-curr-choose-term").classList.remove("game-curr-choose-term");

                changColor = setInterval(returnTermCard, 1000);
            }
        }
    }
    else {
        //add red color
        document.querySelector(".game-curr-choose-explain").classList.add("game-curr-correct-explain");
        document.querySelector(".game-curr-choose-term").classList.add("game-curr-correct-term");
        //remove yellow color

        document.querySelector(".game-curr-choose-explain").classList.remove("game-curr-choose-explain");
        document.querySelector(".game-curr-choose-term").classList.remove("game-curr-choose-term");

        changColor = setInterval(disaperLastGameCard, 1000);
        // stop stoper
        clearInterval(counterSec);


    }


}

function returnTermCard() {

    document.querySelector(".game-curr-worng-explain").classList.remove("game-curr-worng-explain");
    document.querySelector(".game-curr-worng-term").classList.remove("game-curr-worng-term");

    clearInterval(changColor);
}

function disaperGameCard() {
    document.querySelector(".game-curr-correct-explain").classList.add("disable");
    document.querySelector(".game-curr-correct-term").classList.add("disable");

    document.querySelector(".game-curr-correct-explain").style.visibility = "hidden";
    document.querySelector(".game-curr-correct-term").style.visibility = "hidden";

    document.querySelector(".game-curr-correct-explain").classList.remove("game-curr-correct-explain");
    document.querySelector(".game-curr-correct-term").classList.remove("game-curr-correct-term");

    clearInterval(changColor);
}

function disaperLastGameCard() {
    document.querySelector(".game-curr-correct-explain").classList.add("disable");
    document.querySelector(".game-curr-correct-term").classList.add("disable");

    document.querySelector(".game-curr-correct-explain").style.visibility = "hidden";
    document.querySelector(".game-curr-correct-term").style.visibility = "hidden";

    document.querySelector(".game-curr-correct-explain").classList.remove("game-curr-correct-explain");
    document.querySelector(".game-curr-correct-term").classList.remove("game-curr-correct-term");

    clearInterval(changColor);

    //remove back button
    document.querySelector(".match-button").classList.add("disable");
    document.querySelector(".match-button").style.visibility = "hidden";

    document.querySelector("#congrats").innerHTML = "כל הכבוד!";
    document.querySelector(".game #finish-game").innerHTML = "סיימת את המשחק";
}

function setTime() {
    ++totalSec;
    document.querySelector(".time-title").innerHTML = `${pad(parseInt(totalSec / 60))}:${pad(totalSec % 60)}`;
}

function pad(val) {
    var valString = val + ""
    if (valString.length < 2) {
        return `0${valString}`;
    }
    else {
        return valString;
    }
}

var pressTimer;
function longPress() {

}


function afterClickXExplain() {
    document.querySelector(".big-explain").style.visibility = "hidden";
    document.querySelector(".space-of-adding-cards").classList.remove("disable");
}



